## Walkthrough

The goal of this walkthrough is to demonstrate how to use templatedsecret-controller to generate secret material in a Kubernetes cluster. We will use password generation examples to showcase the functionality.

- Start by [installing](install.md) templatedsecretsecret-controller onto your cluster

- Apply the password examples configuration:

```bash
kubectl apply -f https://raw.githubusercontent.com/drae/templatedsecretsecret-controller/main/examples/passwords.yml
```

- Make sure that associated `Secret` resources were created. There should be three resources: `user-password`, `long-user-password`, and `postgresql-password` -- named the same as their generator resources.

```bash
$ kubectl get secrets user-password long-user-password postgresql-password
NAME                  TYPE                                  DATA   AGE
long-user-password    kubernetes.io/basic-auth              1      2m8s
postgresql-password   Opaque                                1      2m8s
user-password         kubernetes.io/basic-auth              1      2m8s
```

- Let's see what is generated within `kubernetes.io/basic-auth` type secrets. Two password resources were configured to generate passwords of different lengths via their `spec.length` field.

```bash
$ kubectl get secret user-password -o jsonpath='{.data.password}' | base64 -d
lek1rd83fi8nquh56fpy9ojit547thr7ast746g9

$ kubectl get secret long-user-password -o jsonpath='{.data.password}' | base64 -d
5enadb1fzztqcchb26n4oz1lmwnrvslounj81mkj9fh3b99aqu0w4scwsaa9rb4bkaaag33mef21vq3zohxz72byd4dkele7v3w5i3gw3l5w7wa68e5pqbkopu7s
```

- `postgresql-password` secret was configured to have a different data key-value pairs by specifying `spec.secretTemplate`.

```bash
$ kubectl get secret postgresql-password -o jsonpath='{.data.postgresql-password}' | base64 -d
46788fn7ft5grfdptcxts0qxlqbqp5jua9umrp59
```

- After looking around, we can delete all resources. `Secrets` generated by the controller are owned by their generator resources, and hence will be deleted when their owning resource is deleted. To retain `Secrets`, you can clear out their `metadata.ownerReferences[*]`.

```bash
kubectl delete -f https://raw.githubusercontent.com/drae/templatedsecretsecret-controller/main/examples/passwords.yml
```

- Refer to [Docs TOC](README.md) for details
