# Default values for templated-secret-controller.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Number of controller replicas to run
replicaCount: 1

# Image repository and tag settings
image:
  repository: ghcr.io/drae/templated-secret-controller
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: latest

# Sorted alphabetically below this point
affinity: {}

# CRDs installation
crds:
  # Specifies whether the CRDs should be installed
  create: true
  # Use template-based CRD installation instead of the standard Helm CRD directory
  # Not recommended: the standard CRD directory approach is preferred
  useTemplate: false

fullnameOverride: ""

imagePullSecrets: []

# Metrics configuration - SUPPORTED by controller via --metrics-bind-address flag
metrics:
  # Enable or disable metrics
  enabled: true
  service:
    type: ClusterIP
    port: 8080
  # Configure the metrics endpoint
  bindAddress: ":8080"

# Namespace configuration - SUPPORTED by controller via --namespace flag
# The controller will only watch resources in this namespace
# If not specified, the controller watches all namespaces
namespace: ""

nameOverride: ""

nodeSelector: {}

podAnnotations: {}

podSecurityContext: {}

# Resource requirements
resources:
  limits:
    cpu: 100m
    memory: 50Mi
  requests:
    cpu: 100m
    memory: 30Mi

# Security context for the controller container
securityContext:
  runAsNonRoot: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsUser: 65532

# Service account configuration
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# Prometheus ServiceMonitor configuration - SUPPORTED when metrics.enabled=true
serviceMonitor:
  enabled: false
  # Additional labels for the ServiceMonitor
  additionalLabels: {}
  # Scrape interval
  interval: 30s
  # Scrape timeout
  scrapeTimeout: 10s
  # Metric relabelings
  metricRelabelings: []
  # Relabelings
  relabelings: []

tolerations: []
# The following settings are documented in the README.md but NOT IMPLEMENTED in the controller:
# - logLevel (no controller flag support)
# - leaderElection (no controller support for --leader-elect or similar)
# - secretManagement.reconciliationInterval and maxSecretAge (no controller support)
# - watchNamespaces.namespaces (controller only supports single --namespace flag)
# - podDisruptionBudget (pure Kubernetes feature, can be implemented if replicaCount > 1)
# - autoscaling (pure Kubernetes feature, can be implemented)
# - webhooks (controller does not implement validation webhooks)
